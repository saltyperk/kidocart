<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KidoCart - Premium Kids Store</title>
  <link rel="icon" type="image/png" href="/logo.png">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ==================== RESET & VARIABLES ==================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --black: #0A0A0A;
      --white: #FFFFFF;
      --gray-100: #F7F7F7;
      --gray-200: #E5E5E5;
      --gray-300: #D4D4D4;
      --gray-500: #737373;
      --gray-700: #404040;
      --accent: #FF6B35;
      --accent-light: #FFF0EB;
      --success: #10B981;
      --gold: #F59E0B;
    }

    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--white);
      color: var(--black);
      line-height: 1.6;
    }

    /* ==================== HEADER ==================== */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--white);
      z-index: 1000;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border-bottom: 1px solid var(--gray-200);
    }

    .header.hidden {
      transform: translateY(-100%);
    }

    .header.scrolled {
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 3rem;
      max-width: 1600px;
      margin: 0 auto;
    }

    .logo {
      font-size: 1.6rem;
      font-weight: 700;
      text-decoration: none;
      color: var(--black);
      letter-spacing: -0.5px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo i {
      color: var(--accent);
      font-size: 1.8rem;
    }

    .logo span {
      color: var(--accent);
    }

    /* Search Bar with Button */
    .search-container {
      flex: 1;
      max-width: 600px;
      margin: 0 3rem;
    }

    .search-bar {
      display: flex;
      align-items: center;
      background: var(--gray-100);
      border-radius: 50px;
      padding: 0.4rem 0.5rem 0.4rem 1.2rem;
      border: 2px solid transparent;
      transition: all 0.3s;
    }

    .search-bar:focus-within {
      background: var(--white);
      border-color: var(--accent);
      box-shadow: 0 0 0 4px var(--accent-light);
    }

    .search-bar input {
      flex: 1;
      border: none;
      background: transparent;
      font-size: 0.95rem;
      outline: none;
      color: var(--black);
      padding: 0.5rem 0;
    }

    .search-bar input::placeholder {
      color: var(--gray-500);
    }

    .search-btn {
      background: var(--accent);
      border: none;
      padding: 0.7rem 1.25rem;
      border-radius: 50px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .search-btn:hover {
      background: #e55a2b;
      transform: scale(1.02);
    }

    .search-btn i {
      font-size: 0.9rem;
    }

    .header-actions {
      display: flex;
      gap: 1.25rem;
      align-items: center;
      flex-shrink: 0;
    }

    .header-action {
      color: var(--black);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      transition: color 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      position: relative;
    }

    .header-action:hover {
      color: var(--accent);
    }

    .header-action .badge {
      position: absolute;
      top: -8px;
      right: -12px;
      background: var(--accent);
      color: white;
      font-size: 0.7rem;
      padding: 0.15rem 0.45rem;
      border-radius: 10px;
      font-weight: 600;
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--black);
    }

    /* ==================== HERO WITH 2 FLASH DEALS ==================== */
    .hero {
      margin-top: 75px;
      padding: 4rem 3rem;
      background: linear-gradient(135deg, var(--gray-100) 0%, #fff 100%);
      display: flex;
      align-items: stretch;
      justify-content: space-between;
      gap: 2.5rem;
      min-height: 80vh;
      max-width: 1600px;
      margin-left: auto;
      margin-right: auto;
    }

    .hero-content {
      flex: 1;
      max-width: 480px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .hero-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--accent);
      color: white;
      padding: 0.5rem 1.2rem;
      border-radius: 25px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      width: fit-content;
    }

    .hero h1 {
      font-size: 3.2rem;
      font-weight: 700;
      line-height: 1.15;
      margin-bottom: 1.5rem;
      letter-spacing: -2px;
      color: var(--black);
    }

    .hero p {
      font-size: 1.05rem;
      color: var(--gray-500);
      margin-bottom: 2rem;
      line-height: 1.7;
    }

    .hero-buttons {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .btn {
      padding: 0.9rem 1.8rem;
      border-radius: 50px;
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      border: none;
    }

    .btn-primary {
      background: var(--black);
      color: var(--white);
      border: 2px solid var(--black);
    }

    .btn-primary:hover {
      background: var(--accent);
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
    }

    .btn-secondary {
      background: transparent;
      color: var(--black);
      border: 2px solid var(--gray-300);
    }

    .btn-secondary:hover {
      border-color: var(--black);
      background: var(--black);
      color: var(--white);
    }

    .hero-stats {
      display: flex;
      gap: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--gray-200);
    }

    .stat-item {
      text-align: left;
    }

    .stat-value {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--accent);
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--gray-500);
    }

    /* Flash Deals Container - 2 Cards */
    .hero-deals {
      flex: 1.2;
      max-width: 580px;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }

    .hero-deals-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--black);
      margin-bottom: 0.25rem;
    }

    .hero-deals-title i {
      color: var(--accent);
    }

    .hero-deal-card {
      background: var(--black);
      border-radius: 18px;
      overflow: hidden;
      display: flex;
      flex: 1;
      transition: all 0.3s;
      cursor: pointer;
    }

    .hero-deal-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }

    .hero-deal-image {
      width: 160px;
      min-height: 160px;
      position: relative;
      overflow: hidden;
      flex-shrink: 0;
    }

    .hero-deal-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }

    .hero-deal-card:hover .hero-deal-image img {
      transform: scale(1.08);
    }

    .hero-deal-badge {
      position: absolute;
      top: 0.75rem;
      left: 0.75rem;
      background: var(--accent);
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.8rem;
    }

    .hero-deal-content {
      padding: 1.25rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .hero-deal-label {
      color: var(--accent);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 0.35rem;
      display: flex;
      align-items: center;
      gap: 0.35rem;
    }

    .hero-deal-content h3 {
      color: var(--white);
      font-size: 1.1rem;
      margin-bottom: 0.35rem;
      line-height: 1.3;
    }

    .hero-deal-content p {
      color: var(--gray-500);
      font-size: 0.8rem;
      margin-bottom: 0.75rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .hero-deal-price {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .hero-deal-price .price-current {
      color: var(--white);
      font-size: 1.4rem;
      font-weight: 700;
    }

    .hero-deal-price .price-original {
      color: var(--gray-500);
      text-decoration: line-through;
      font-size: 0.9rem;
    }

    .hero-deal-timer {
      display: flex;
      gap: 0.5rem;
    }

    .timer-item {
      text-align: center;
    }

    .timer-value {
      font-size: 1rem;
      font-weight: 700;
      background: var(--white);
      color: var(--black);
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
    }

    .timer-label {
      font-size: 0.6rem;
      color: var(--gray-500);
      margin-top: 0.25rem;
      text-transform: uppercase;
    }

    .hero-deal-btn {
      background: var(--accent);
      color: white;
      padding: 0.6rem 1rem;
      border: none;
      border-radius: 8px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      margin-top: 0.5rem;
    }

    .hero-deal-btn:hover {
      background: #ff5722;
    }

    /* ==================== CATEGORIES ==================== */
    .categories-section {
      padding: 2.5rem 3rem;
      background: var(--white);
      border-bottom: 1px solid var(--gray-200);
    }

    .categories-scroll {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      scrollbar-width: none;
      max-width: 1400px;
      margin: 0 auto;
      justify-content: center;
    }

    .categories-scroll::-webkit-scrollbar {
      display: none;
    }

    .category-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.6rem;
      padding: 1rem 1.5rem;
      background: var(--gray-100);
      border-radius: 12px;
      text-decoration: none;
      color: var(--black);
      transition: all 0.3s;
      min-width: 100px;
    }

    .category-card:hover {
      background: var(--accent);
      color: var(--white);
      transform: translateY(-4px);
      box-shadow: 0 12px 25px rgba(255, 107, 53, 0.2);
    }

    .category-card i {
      font-size: 1.4rem;
    }

    .category-card span {
      font-size: 0.8rem;
      font-weight: 600;
      white-space: nowrap;
    }

    /* ==================== SECTIONS ==================== */
    .section {
      padding: 4rem 3rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 2rem;
    }

    .section-title {
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: -1px;
      color: var(--black);
    }

    .section-subtitle {
      color: var(--gray-500);
      margin-top: 0.3rem;
      font-size: 0.9rem;
    }

    .view-all {
      color: var(--black);
      text-decoration: none;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 1.2rem;
      border: 2px solid var(--gray-200);
      border-radius: 25px;
      transition: all 0.3s;
      font-size: 0.85rem;
    }

    .view-all:hover {
      background: var(--black);
      color: var(--white);
      border-color: var(--black);
    }

    /* ==================== PRODUCTS GRID ==================== */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
    }

    .product-card {
      background: var(--white);
      border-radius: 14px;
      overflow: hidden;
      transition: all 0.3s;
      border: 1px solid var(--gray-200);
      cursor: pointer;
    }

    .product-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 18px 35px rgba(0,0,0,0.1);
      border-color: transparent;
    }

    .product-image {
      position: relative;
      background: var(--gray-100);
      aspect-ratio: 1;
      overflow: hidden;
    }

    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }

    .product-card:hover .product-image img {
      transform: scale(1.06);
    }

    .product-badge {
      position: absolute;
      top: 0.7rem;
      left: 0.7rem;
      padding: 0.3rem 0.7rem;
      border-radius: 15px;
      font-size: 0.7rem;
      font-weight: 600;
    }

    .badge-new {
      background: var(--black);
      color: var(--white);
    }

    .badge-sale {
      background: var(--accent);
      color: var(--white);
    }

    .badge-hot {
      background: var(--gold);
      color: var(--black);
    }

    .product-actions {
      position: absolute;
      bottom: 0.7rem;
      left: 0.7rem;
      right: 0.7rem;
      display: flex;
      gap: 0.4rem;
      opacity: 0;
      transform: translateY(12px);
      transition: all 0.3s;
    }

    .product-card:hover .product-actions {
      opacity: 1;
      transform: translateY(0);
    }

    .action-btn {
      flex: 1;
      padding: 0.7rem;
      background: var(--white);
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.75rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .action-btn:hover {
      background: var(--black);
      color: var(--white);
    }

    .action-btn.wishlist {
      flex: none;
      width: 38px;
      font-size: 0.9rem;
    }

    .action-btn.wishlist:hover {
      background: var(--accent);
      color: var(--white);
    }

    .product-info {
      padding: 1rem;
    }

    .product-category {
      font-size: 0.7rem;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .product-name {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.35rem;
      color: var(--black);
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .product-rating {
      display: flex;
      align-items: center;
      gap: 0.2rem;
      margin-bottom: 0.35rem;
    }

    .product-rating i {
      color: var(--gold);
      font-size: 0.7rem;
    }

    .product-rating span {
      font-size: 0.7rem;
      color: var(--gray-500);
      margin-left: 0.2rem;
    }

    .product-price {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .price-current {
      font-size: 1rem;
      font-weight: 700;
      color: var(--black);
    }

    .price-original {
      color: var(--gray-500);
      text-decoration: line-through;
      font-size: 0.8rem;
    }

    .price-discount {
      background: var(--accent-light);
      color: var(--accent);
      font-size: 0.65rem;
      font-weight: 600;
      padding: 0.15rem 0.35rem;
      border-radius: 4px;
    }

    /* ==================== MORE DEALS SECTION ==================== */
    .deals-section {
      background: var(--gray-100);
      padding: 4rem 3rem;
    }

    .deals-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .deals-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }

    .deal-card {
      background: var(--white);
      border-radius: 14px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: all 0.3s;
      border: 1px solid var(--gray-200);
      cursor: pointer;
    }

    .deal-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 18px 35px rgba(0,0,0,0.1);
      border-color: transparent;
    }

    .deal-image {
      height: 160px;
      position: relative;
      overflow: hidden;
    }

    .deal-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }

    .deal-card:hover .deal-image img {
      transform: scale(1.05);
    }

    .deal-discount-badge {
      position: absolute;
      top: 0.8rem;
      left: 0.8rem;
      background: var(--accent);
      color: white;
      padding: 0.35rem 0.7rem;
      border-radius: 15px;
      font-weight: 700;
      font-size: 0.8rem;
    }

    .deal-content {
      padding: 1.25rem;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .deal-content h3 {
      font-size: 1rem;
      margin-bottom: 0.4rem;
      color: var(--black);
    }

    .deal-content p {
      color: var(--gray-500);
      font-size: 0.8rem;
      margin-bottom: 0.75rem;
      flex: 1;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .deal-price {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-bottom: 0.75rem;
    }

    .deal-timer-small {
      display: flex;
      gap: 0.4rem;
    }

    .timer-item-small {
      text-align: center;
    }

    .timer-value-small {
      font-size: 0.9rem;
      font-weight: 700;
      background: var(--gray-100);
      color: var(--black);
      width: 34px;
      height: 34px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
    }

    .timer-label-small {
      font-size: 0.55rem;
      color: var(--gray-500);
      margin-top: 0.2rem;
    }

    /* ==================== REVIEWS SECTION ==================== */
    .reviews-section {
      background: var(--white);
    }

    .reviews-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }

    .review-card {
      background: var(--gray-100);
      border-radius: 14px;
      padding: 1.5rem;
      transition: all 0.3s;
    }

    .review-card:hover {
      background: var(--white);
      box-shadow: 0 18px 35px rgba(0,0,0,0.08);
      transform: translateY(-4px);
    }

    .review-header {
      display: flex;
      align-items: center;
      gap: 0.9rem;
      margin-bottom: 0.9rem;
    }

    .review-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
    }

    .review-author h4 {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.15rem;
    }

    .review-author span {
      font-size: 0.7rem;
      color: var(--gray-500);
    }

    .review-rating {
      display: flex;
      gap: 0.15rem;
      margin-bottom: 0.7rem;
    }

    .review-rating i {
      color: var(--gold);
      font-size: 0.8rem;
    }

    .review-text {
      color: var(--gray-700);
      font-size: 0.85rem;
      line-height: 1.6;
      margin-bottom: 0.9rem;
    }

    .review-product {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      padding-top: 0.9rem;
      border-top: 1px solid var(--gray-200);
    }

    .review-product img {
      width: 38px;
      height: 38px;
      border-radius: 6px;
      object-fit: cover;
    }

    .review-product span {
      font-size: 0.75rem;
      color: var(--gray-500);
    }

    /* ==================== FEATURES ==================== */
    .features-section {
      background: var(--gray-100);
      padding: 3rem;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .feature-item {
      text-align: center;
      padding: 1.25rem;
    }

    .feature-icon {
      width: 55px;
      height: 55px;
      background: var(--white);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 0.9rem;
      font-size: 1.2rem;
      color: var(--accent);
      box-shadow: 0 8px 25px rgba(0,0,0,0.05);
    }

    .feature-item h4 {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.3rem;
    }

    .feature-item p {
      font-size: 0.75rem;
      color: var(--gray-500);
    }

    /* ==================== NEWSLETTER ==================== */
    .newsletter-section {
      background: var(--accent);
      padding: 3rem;
      text-align: center;
    }

    .newsletter-content {
      max-width: 500px;
      margin: 0 auto;
    }

    .newsletter-content h2 {
      color: var(--white);
      font-size: 1.6rem;
      margin-bottom: 0.5rem;
    }

    .newsletter-content p {
      color: rgba(255,255,255,0.85);
      margin-bottom: 1.25rem;
      font-size: 0.9rem;
    }

    .newsletter-form {
      display: flex;
      gap: 0.6rem;
      max-width: 400px;
      margin: 0 auto;
    }

    .newsletter-form input {
      flex: 1;
      padding: 0.85rem 1.2rem;
      border: none;
      border-radius: 50px;
      font-size: 0.85rem;
      outline: none;
    }

    .newsletter-form button {
      padding: 0.85rem 1.5rem;
      background: var(--black);
      color: var(--white);
      border: none;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.85rem;
    }

    .newsletter-form button:hover {
      background: var(--gray-700);
    }

    /* ==================== FOOTER ==================== */
    .footer {
      background: var(--black);
      color: var(--white);
      padding: 3.5rem 3rem 1.5rem;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: 1.5fr repeat(3, 1fr);
      gap: 2.5rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .footer-brand .logo {
      color: var(--white);
      font-size: 1.5rem;
      margin-bottom: 0.9rem;
      display: inline-flex;
    }

    .footer-brand p {
      color: var(--gray-500);
      margin-bottom: 1.1rem;
      line-height: 1.6;
      font-size: 0.85rem;
    }

    .social-links {
      display: flex;
      gap: 0.5rem;
    }

    .social-links a {
      width: 36px;
      height: 36px;
      background: var(--gray-700);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--white);
      transition: all 0.3s;
      font-size: 0.85rem;
    }

    .social-links a:hover {
      background: var(--accent);
      transform: translateY(-2px);
    }

    .footer-section h4 {
      margin-bottom: 1.1rem;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }

    .footer-section a {
      display: block;
      color: var(--gray-500);
      text-decoration: none;
      margin-bottom: 0.6rem;
      transition: all 0.2s;
      font-size: 0.85rem;
    }

    .footer-section a:hover {
      color: var(--accent);
      padding-left: 4px;
    }

    .footer-bottom {
      max-width: 1400px;
      margin: 2.5rem auto 0;
      padding-top: 1.25rem;
      border-top: 1px solid var(--gray-700);
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--gray-500);
      font-size: 0.8rem;
    }

    .payment-icons {
      display: flex;
      gap: 0.6rem;
      font-size: 1.4rem;
    }

    /* ==================== TOAST ==================== */
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: var(--black);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      display: none;
      z-index: 9999;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      font-size: 0.9rem;
    }

    .toast.show {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      animation: slideIn 0.3s ease;
    }

    .toast.success {
      background: var(--success);
    }

    .toast.error {
      background: #ef4444;
    }

    .toast.warning {
      background: var(--gold);
      color: var(--black);
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* ==================== LOADING ==================== */
    .loading-skeleton {
      background: linear-gradient(90deg, var(--gray-100) 25%, var(--gray-200) 50%, var(--gray-100) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      border-radius: 10px;
    }

    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    .products-loading {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
    }

    .product-skeleton {
      height: 320px;
      border-radius: 14px;
    }

    /* ==================== RESPONSIVE ==================== */
    @media (max-width: 1200px) {
      .products-grid, .products-loading {
        grid-template-columns: repeat(3, 1fr);
      }

      .deals-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .reviews-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .features-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 900px) {
      .hero {
        flex-direction: column;
        padding: 3rem 1.5rem;
      }

      .hero-content {
        max-width: 100%;
        text-align: center;
      }

      .hero-tag {
        margin-left: auto;
        margin-right: auto;
      }

      .hero-buttons {
        justify-content: center;
      }

      .hero-stats {
        justify-content: center;
      }

      .hero-deals {
        max-width: 100%;
      }

      .hero-deal-card {
        flex-direction: row;
      }

      .products-grid, .products-loading {
        grid-template-columns: repeat(2, 1fr);
      }

      .deals-grid {
        grid-template-columns: 1fr;
      }

      .footer-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .header-container {
        padding: 0.9rem 1.25rem;
      }

      .search-container {
        display: none;
      }

      .mobile-menu-btn {
        display: block;
      }

      .header-action span {
        display: none;
      }

      .hero {
        margin-top: 60px;
      }

      .hero h1 {
        font-size: 2rem;
      }

      .hero-deal-card {
        flex-direction: column;
      }

      .hero-deal-image {
        width: 100%;
        height: 140px;
      }

      .section {
        padding: 3rem 1.25rem;
      }

      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.9rem;
      }

      .section-title {
        font-size: 1.5rem;
      }

      .products-grid, .products-loading {
        gap: 1rem;
      }

      .reviews-grid {
        grid-template-columns: 1fr;
      }

      .features-grid {
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }

      .footer-grid {
        grid-template-columns: 1fr;
        gap: 1.75rem;
      }

      .footer-bottom {
        flex-direction: column;
        gap: 0.9rem;
        text-align: center;
      }

      .newsletter-form {
        flex-direction: column;
      }

      .categories-scroll {
        justify-content: flex-start;
        padding: 0 1rem;
      }

      .categories-section {
        padding: 1.75rem 0;
      }
    }

    @media (max-width: 480px) {
      .products-grid, .products-loading {
        grid-template-columns: 1fr;
      }

      .hero h1 {
        font-size: 1.75rem;
      }

      .features-grid {
        grid-template-columns: 1fr;
      }

      .hero-buttons {
        flex-direction: column;
      }

      .hero-buttons .btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <!-- ==================== HEADER ==================== -->
  <header class="header" id="header">
    <div class="header-container">
      <a href="index.html" class="logo">
        <i class="fas fa-baby"></i>
        Kido<span>Cart</span>
      </a>
      
      <div class="search-container">
        <div class="search-bar">
          <input type="text" id="search-input" placeholder="Search for products, brands, categories...">
          <button class="search-btn" id="search-btn">
            <i class="fas fa-search"></i>
            <span>Search</span>
          </button>
        </div>
      </div>
      
      <div class="header-actions">
        <a href="account.html" class="header-action">
          <i class="fas fa-user"></i>
          <span>Account</span>
        </a>
        <a href="wishlist.html" class="header-action">
          <i class="fas fa-heart"></i>
          <span>Wishlist</span>
          <span class="badge" id="wishlist-count">0</span>
        </a>
        <a href="cart.html" class="header-action">
          <i class="fas fa-shopping-bag"></i>
          <span>Cart</span>
          <span class="badge" id="cart-count">0</span>
        </a>
        <button class="mobile-menu-btn" id="mobile-menu-btn">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- ==================== HERO WITH 2 FLASH DEALS ==================== -->
  <section class="hero">
    <div class="hero-content">
      <span class="hero-tag"><i class="fas fa-sparkles"></i> New Collection 2024</span>
      <h1>Curated Essentials for Little Ones</h1>
      <p>Discover premium quality products designed with love for your children. Safe, comfortable, and stylish essentials for every milestone.</p>
      <div class="hero-buttons">
        <a href="products.html" class="btn btn-primary">
          <i class="fas fa-shopping-bag"></i> Shop Collection
        </a>
        <a href="products.html?badge=new" class="btn btn-secondary">
          Explore New Arrivals
        </a>
      </div>
      <div class="hero-stats">
        <div class="stat-item">
          <div class="stat-value">50K+</div>
          <div class="stat-label">Happy Parents</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">4.9</div>
          <div class="stat-label">Avg Rating</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">500+</div>
          <div class="stat-label">Products</div>
        </div>
      </div>
    </div>

    <!-- 2 Flash Deal Cards -->
    <div class="hero-deals">
      <div class="hero-deals-title">
        <i class="fas fa-bolt"></i> Flash Deals - Limited Time!
      </div>
      
      <!-- Flash Deal 1 -->
      <div class="hero-deal-card" id="flash-deal-1" onclick="goToProduct(this.dataset.productId)">
        <div class="hero-deal-image">
          <img src="https://via.placeholder.com/200x200?text=Loading..." alt="Flash Deal" id="deal1-img">
          <span class="hero-deal-badge" id="deal1-discount">--% OFF</span>
        </div>
        <div class="hero-deal-content">
          <div class="hero-deal-label"><i class="fas fa-fire"></i> Deal of the Day</div>
          <h3 id="deal1-title">Loading...</h3>
          <p id="deal1-desc">Loading product details...</p>
          <div class="hero-deal-price">
            <span class="price-current" id="deal1-price">₹---</span>
            <span class="price-original" id="deal1-original">₹---</span>
          </div>
          <div class="hero-deal-timer">
            <div class="timer-item">
              <div class="timer-value" id="deal1-hours">00</div>
              <div class="timer-label">Hrs</div>
            </div>
            <div class="timer-item">
              <div class="timer-value" id="deal1-mins">00</div>
              <div class="timer-label">Min</div>
            </div>
            <div class="timer-item">
              <div class="timer-value" id="deal1-secs">00</div>
              <div class="timer-label">Sec</div>
            </div>
          </div>
          <button class="hero-deal-btn" onclick="event.stopPropagation(); addDealToCart(1)">
            <i class="fas fa-cart-plus"></i> Add to Cart
          </button>
        </div>
      </div>

      <!-- Flash Deal 2 -->
      <div class="hero-deal-card" id="flash-deal-2" onclick="goToProduct(this.dataset.productId)">
        <div class="hero-deal-image">
          <img src="https://via.placeholder.com/200x200?text=Loading..." alt="Flash Deal" id="deal2-img">
          <span class="hero-deal-badge" id="deal2-discount">--% OFF</span>
        </div>
        <div class="hero-deal-content">
          <div class="hero-deal-label"><i class="fas fa-clock"></i> Ends Soon</div>
          <h3 id="deal2-title">Loading...</h3>
          <p id="deal2-desc">Loading product details...</p>
          <div class="hero-deal-price">
            <span class="price-current" id="deal2-price">₹---</span>
            <span class="price-original" id="deal2-original">₹---</span>
          </div>
          <div class="hero-deal-timer">
            <div class="timer-item">
              <div class="timer-value" id="deal2-hours">00</div>
              <div class="timer-label">Hrs</div>
            </div>
            <div class="timer-item">
              <div class="timer-value" id="deal2-mins">00</div>
              <div class="timer-label">Min</div>
            </div>
            <div class="timer-item">
              <div class="timer-value" id="deal2-secs">00</div>
              <div class="timer-label">Sec</div>
            </div>
          </div>
          <button class="hero-deal-btn" onclick="event.stopPropagation(); addDealToCart(2)">
            <i class="fas fa-cart-plus"></i> Add to Cart
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== CATEGORIES ==================== -->
  <section class="categories-section">
    <div class="categories-scroll">
      <a href="products.html?category=clothing" class="category-card">
        <i class="fas fa-tshirt"></i>
        <span>Clothing</span>
      </a>
      <a href="products.html?category=toys" class="category-card">
        <i class="fas fa-gamepad"></i>
        <span>Toys</span>
      </a>
      <a href="products.html?category=feeding" class="category-card">
        <i class="fas fa-utensils"></i>
        <span>Feeding</span>
      </a>
      <a href="products.html?category=diapers" class="category-card">
        <i class="fas fa-baby"></i>
        <span>Diapers</span>
      </a>
      <a href="products.html?category=furniture" class="category-card">
        <i class="fas fa-couch"></i>
        <span>Furniture</span>
      </a>
      <a href="products.html?category=gear" class="category-card">
        <i class="fas fa-car"></i>
        <span>Gear</span>
      </a>
      <a href="products.html?category=bath" class="category-card">
        <i class="fas fa-bath"></i>
        <span>Bath</span>
      </a>
      <a href="products.html?category=books" class="category-card">
        <i class="fas fa-book"></i>
        <span>Books</span>
      </a>
    </div>
  </section>

  <!-- ==================== TRENDING NOW ==================== -->
  <section class="section">
    <div class="section-header">
      <div>
        <h2 class="section-title">Trending Now</h2>
        <p class="section-subtitle">Most popular picks this week</p>
      </div>
      <a href="products.html" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
    </div>
    
    <div id="trending-products">
      <div class="products-loading">
        <div class="product-skeleton loading-skeleton"></div>
        <div class="product-skeleton loading-skeleton"></div>
        <div class="product-skeleton loading-skeleton"></div>
        <div class="product-skeleton loading-skeleton"></div>
      </div>
    </div>
  </section>

  <!-- ==================== MORE DEALS ==================== -->
  <section class="deals-section">
    <div class="deals-container">
      <div class="section-header">
        <div>
          <h2 class="section-title">Limited Time Offers</h2>
          <p class="section-subtitle">Grab these deals before they're gone!</p>
        </div>
        <a href="products.html?badge=sale" class="view-all">View All Deals <i class="fas fa-arrow-right"></i></a>
      </div>
      
      <div id="deals-products">
        <div class="products-loading" style="grid-template-columns: repeat(3, 1fr);">
          <div class="product-skeleton loading-skeleton" style="height: 280px;"></div>
          <div class="product-skeleton loading-skeleton" style="height: 280px;"></div>
          <div class="product-skeleton loading-skeleton" style="height: 280px;"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== BEST SELLERS ==================== -->
  <section class="section">
    <div class="section-header">
      <div>
        <h2 class="section-title">Best Sellers</h2>
        <p class="section-subtitle">Top rated by thousands of parents</p>
      </div>
      <a href="products.html?sort=bestselling" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
    </div>
    
    <div id="bestseller-products">
      <div class="products-loading">
        <div class="product-skeleton loading-skeleton"></div>
        <div class="product-skeleton loading-skeleton"></div>
        <div class="product-skeleton loading-skeleton"></div>
        <div class="product-skeleton loading-skeleton"></div>
      </div>
    </div>
  </section>

  <!-- ==================== CUSTOMER REVIEWS ==================== -->
  <section class="section reviews-section">
    <div class="section-header">
      <div>
        <h2 class="section-title">What Parents Say</h2>
        <p class="section-subtitle">Real reviews from our happy customers</p>
      </div>
    </div>
    
    <div class="reviews-grid">
      <div class="review-card">
        <div class="review-header">
          <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Customer" class="review-avatar">
          <div class="review-author">
            <h4>Priya Sharma</h4>
            <span>Verified Buyer</span>
          </div>
        </div>
        <div class="review-rating">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
        </div>
        <p class="review-text">"Absolutely love the quality! The organic cotton rompers are so soft on my baby's skin. Fast delivery and beautiful packaging."</p>
        <div class="review-product">
          <img src="https://images.unsplash.com/photo-1522771930-78848d9293e8?w=100" alt="Product">
          <span>Organic Cotton Baby Romper</span>
        </div>
      </div>

      <div class="review-card">
        <div class="review-header">
          <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Customer" class="review-avatar">
          <div class="review-author">
            <h4>Rahul Patel</h4>
            <span>Verified Buyer</span>
          </div>
        </div>
        <div class="review-rating">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
        </div>
        <p class="review-text">"The stroller is amazing! Worth every rupee. Smooth wheels, easy to fold, and my son loves it."</p>
        <div class="review-product">
          <img src="https://images.unsplash.com/photo-1591088398332-8a7791972843?w=100" alt="Product">
          <span>Premium Baby Stroller</span>
        </div>
      </div>

      <div class="review-card">
        <div class="review-header">
          <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Customer" class="review-avatar">
          <div class="review-author">
            <h4>Ananya Gupta</h4>
            <span>Verified Buyer</span>
          </div>
        </div>
        <div class="review-rating">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star-half-alt"></i>
        </div>
        <p class="review-text">"My daughter is obsessed with the learning tablet! Educational and fun at the same time."</p>
        <div class="review-product">
          <img src="https://images.unsplash.com/photo-1587654780291-39c9404d746b?w=100" alt="Product">
          <span>Interactive Learning Tablet</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== FEATURES ==================== -->
  <section class="features-section">
    <div class="features-grid">
      <div class="feature-item">
        <div class="feature-icon">
          <i class="fas fa-truck"></i>
        </div>
        <h4>Free Shipping</h4>
        <p>On orders above ₹500</p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">
          <i class="fas fa-undo"></i>
        </div>
        <h4>Easy Returns</h4>
        <p>7-day return policy</p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <h4>Secure Payment</h4>
        <p>100% secure checkout</p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">
          <i class="fas fa-headset"></i>
        </div>
        <h4>24/7 Support</h4>
        <p>Dedicated assistance</p>
      </div>
    </div>
  </section>

  <!-- ==================== NEWSLETTER ==================== -->
  <section class="newsletter-section">
    <div class="newsletter-content">
      <h2>Join the KidoCart Family</h2>
      <p>Subscribe for exclusive offers, parenting tips & new arrival updates</p>
      <form class="newsletter-form" id="newsletter-form">
        <input type="email" placeholder="Enter your email address" required>
        <button type="submit">Subscribe</button>
      </form>
    </div>
  </section>

  <!-- ==================== FOOTER ==================== -->
  <footer class="footer">
    <div class="footer-grid">
      <div class="footer-brand">
        <a href="index.html" class="logo">
          <i class="fas fa-baby"></i>
          Kido<span>Cart</span>
        </a>
        <p>Premium quality kids products designed with love. Safe, comfortable, and stylish essentials for your little ones.</p>
        <div class="social-links">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
      
      <div class="footer-section">
        <h4>Shop</h4>
        <a href="products.html">All Products</a>
        <a href="products.html?badge=new">New Arrivals</a>
        <a href="products.html?badge=sale">Sale</a>
        <a href="products.html?category=toys">Toys</a>
      </div>
      
      <div class="footer-section">
        <h4>Help</h4>
        <a href="orders.html">Track Order</a>
        <a href="#">Shipping Info</a>
        <a href="#">Returns</a>
        <a href="#">Contact Us</a>
      </div>
      
      <div class="footer-section">
        <h4>Account</h4>
        <a href="account.html">My Account</a>
        <a href="wishlist.html">Wishlist</a>
        <a href="cart.html">Cart</a>
        <a href="orders.html">Orders</a>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2024 KidoCart. All rights reserved. Made with ❤️ in India</p>
      <div class="payment-icons">
        <i class="fab fa-cc-visa"></i>
        <i class="fab fa-cc-mastercard"></i>
        <i class="fab fa-cc-amex"></i>
        <i class="fab fa-google-pay"></i>
      </div>
    </div>
  </footer>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <!-- ==================== SCRIPTS ==================== -->
  <script src="js/data.js"></script>
  <script src="js/app.js"></script>
  <script>
    // ==================== GLOBAL VARIABLES ====================
    let allProducts = [];
    let flashDealProducts = [];

    // ==================== HEADER SCROLL BEHAVIOR ====================
    let lastScroll = 0;
    const header = document.getElementById('header');

    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      
      if (currentScroll > 10) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      if (currentScroll > lastScroll && currentScroll > 150) {
        header.classList.add('hidden');
      } else {
        header.classList.remove('hidden');
      }
      
      lastScroll = currentScroll;
    });

    // ==================== FLASH DEAL TIMERS ====================
    function startDealTimer(dealNum, hours, mins, secs) {
      let totalSeconds = hours * 3600 + mins * 60 + secs;
      
      const interval = setInterval(() => {
        if (totalSeconds > 0) {
          totalSeconds--;
          const h = Math.floor(totalSeconds / 3600);
          const m = Math.floor((totalSeconds % 3600) / 60);
          const s = totalSeconds % 60;
          
          document.getElementById(`deal${dealNum}-hours`).textContent = String(h).padStart(2, '0');
          document.getElementById(`deal${dealNum}-mins`).textContent = String(m).padStart(2, '0');
          document.getElementById(`deal${dealNum}-secs`).textContent = String(s).padStart(2, '0');
        } else {
          clearInterval(interval);
        }
      }, 1000);
    }

    // ==================== LOAD PRODUCTS FROM MONGODB ====================
    async function loadAllProducts() {
      try {
        const response = await fetch('/api/products');
        
        if (!response.ok) {
          throw new Error('Failed to fetch products');
        }
        
        allProducts = await response.json();
        
        if (allProducts.length > 0) {
          // Render all sections
          renderFlashDeals();
          renderTrendingProducts();
          renderDealsProducts();
          renderBestsellerProducts();
        } else {
          showEmptyState();
        }
      } catch (error) {
        console.error('Error loading products:', error);
        showErrorState();
      }
    }

    // ==================== RENDER FLASH DEALS ====================
    function renderFlashDeals() {
      // Get products with sale badge or highest discount
      const saleProducts = allProducts
        .filter(p => p.badge === 'sale' || (p.originalPrice && p.originalPrice > p.price))
        .sort((a, b) => {
          const discountA = a.originalPrice ? (1 - a.price / a.originalPrice) : 0;
          const discountB = b.originalPrice ? (1 - b.price / b.originalPrice) : 0;
          return discountB - discountA;
        });

      flashDealProducts = saleProducts.slice(0, 2);

      // If not enough sale products, get featured or first products
      if (flashDealProducts.length < 2) {
        const remaining = allProducts
          .filter(p => !flashDealProducts.includes(p))
          .slice(0, 2 - flashDealProducts.length);
        flashDealProducts = [...flashDealProducts, ...remaining];
      }

      // Render Deal 1
      if (flashDealProducts[0]) {
        const deal1 = flashDealProducts[0];
        const productId = deal1._id || deal1.id;
        const discount = deal1.originalPrice 
          ? Math.round((1 - deal1.price / deal1.originalPrice) * 100) 
          : 20;

        document.getElementById('flash-deal-1').dataset.productId = productId;
        document.getElementById('deal1-img').src = deal1.images?.[0] || 'https://via.placeholder.com/200x200?text=Product';
        document.getElementById('deal1-discount').textContent = `${discount}% OFF`;
        document.getElementById('deal1-title').textContent = deal1.name;
        document.getElementById('deal1-desc').textContent = deal1.description || 'Premium quality product for your little one';
        document.getElementById('deal1-price').textContent = `₹${deal1.price.toLocaleString('en-IN')}`;
        document.getElementById('deal1-original').textContent = deal1.originalPrice 
          ? `₹${deal1.originalPrice.toLocaleString('en-IN')}` 
          : '';

        startDealTimer(1, 5, 23, 47);
      }

      // Render Deal 2
      if (flashDealProducts[1]) {
        const deal2 = flashDealProducts[1];
        const productId = deal2._id || deal2.id;
        const discount = deal2.originalPrice 
          ? Math.round((1 - deal2.price / deal2.originalPrice) * 100) 
          : 15;

        document.getElementById('flash-deal-2').dataset.productId = productId;
        document.getElementById('deal2-img').src = deal2.images?.[0] || 'https://via.placeholder.com/200x200?text=Product';
        document.getElementById('deal2-discount').textContent = `${discount}% OFF`;
        document.getElementById('deal2-title').textContent = deal2.name;
        document.getElementById('deal2-desc').textContent = deal2.description || 'Premium quality product for your little one';
        document.getElementById('deal2-price').textContent = `₹${deal2.price.toLocaleString('en-IN')}`;
        document.getElementById('deal2-original').textContent = deal2.originalPrice 
          ? `₹${deal2.originalPrice.toLocaleString('en-IN')}` 
          : '';

        startDealTimer(2, 2, 45, 12);
      }
    }

    // ==================== RENDER TRENDING PRODUCTS ====================
    function renderTrendingProducts() {
      const container = document.getElementById('trending-products');
      const trendingProducts = allProducts
        .filter(p => p.featured || p.badge === 'hot' || p.badge === 'new')
        .slice(0, 4);

      // If not enough featured, fill with others
      const products = trendingProducts.length >= 4 
        ? trendingProducts 
        : [...trendingProducts, ...allProducts.filter(p => !trendingProducts.includes(p))].slice(0, 4);

      container.innerHTML = `<div class="products-grid">${products.map(p => createProductCard(p)).join('')}</div>`;
    }

    // ==================== RENDER DEALS PRODUCTS ====================
    function renderDealsProducts() {
      const container = document.getElementById('deals-products');
      const dealsProducts = allProducts
        .filter(p => p.badge === 'sale' || (p.originalPrice && p.originalPrice > p.price))
        .slice(0, 3);

      if (dealsProducts.length > 0) {
        container.innerHTML = `<div class="deals-grid">${dealsProducts.map(p => createDealCard(p)).join('')}</div>`;
      } else {
        container.innerHTML = `<div class="deals-grid">${allProducts.slice(0, 3).map(p => createDealCard(p)).join('')}</div>`;
      }
    }

    // ==================== RENDER BESTSELLER PRODUCTS ====================
    function renderBestsellerProducts() {
      const container = document.getElementById('bestseller-products');
      const bestsellerProducts = allProducts
        .filter(p => p.rating >= 4.5 || p.reviewCount > 100)
        .sort((a, b) => (b.rating || 0) - (a.rating || 0))
        .slice(0, 4);

      const products = bestsellerProducts.length >= 4 
        ? bestsellerProducts 
        : [...bestsellerProducts, ...allProducts.filter(p => !bestsellerProducts.includes(p))].slice(0, 4);

      container.innerHTML = `<div class="products-grid">${products.map(p => createProductCard(p)).join('')}</div>`;
    }

    // ==================== CREATE PRODUCT CARD ====================
    function createProductCard(product) {
      const imageUrl = product.images?.[0] || 'https://via.placeholder.com/300x300?text=No+Image';
      const discount = product.originalPrice 
        ? Math.round((1 - product.price / product.originalPrice) * 100) 
        : 0;
      const productId = product._id || product.id;

      const badgeClass = product.badge === 'new' ? 'badge-new' : 
                         product.badge === 'sale' ? 'badge-sale' : 
                         product.badge === 'hot' ? 'badge-hot' : '';

      return `
        <div class="product-card" onclick="goToProduct('${productId}')">
          <div class="product-image">
            <img src="${imageUrl}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300x300?text=No+Image'">
            ${product.badge ? `<span class="product-badge ${badgeClass}">${product.badge.charAt(0).toUpperCase() + product.badge.slice(1)}</span>` : ''}
            <div class="product-actions">
              <button class="action-btn" onclick="event.stopPropagation(); quickAddToCart('${productId}')">Add to Cart</button>
              <button class="action-btn wishlist" onclick="event.stopPropagation(); quickAddToWishlist('${productId}')"><i class="far fa-heart"></i></button>
            </div>
          </div>
          <div class="product-info">
            <div class="product-category">${product.category || 'General'}</div>
            <h3 class="product-name">${product.name}</h3>
            <div class="product-rating">
              ${generateStars(product.rating || 4)}
              <span>(${product.reviewCount || 0})</span>
            </div>
            <div class="product-price">
              <span class="price-current">₹${product.price.toLocaleString('en-IN')}</span>
              ${product.originalPrice ? `<span class="price-original">₹${product.originalPrice.toLocaleString('en-IN')}</span>` : ''}
              ${discount > 0 ? `<span class="price-discount">${discount}% OFF</span>` : ''}
            </div>
          </div>
        </div>
      `;
    }

    // ==================== CREATE DEAL CARD ====================
    function createDealCard(product) {
      const imageUrl = product.images?.[0] || 'https://via.placeholder.com/300x300?text=No+Image';
      const discount = product.originalPrice 
        ? Math.round((1 - product.price / product.originalPrice) * 100) 
        : 0;
      const productId = product._id || product.id;
      const randomHours = Math.floor(Math.random() * 10) + 1;
      const randomMins = Math.floor(Math.random() * 60);

      return `
        <div class="deal-card" onclick="goToProduct('${productId}')">
          <div class="deal-image">
            <img src="${imageUrl}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300x300?text=No+Image'">
            ${discount > 0 ? `<span class="deal-discount-badge">${discount}% OFF</span>` : '<span class="deal-discount-badge">DEAL</span>'}
          </div>
          <div class="deal-content">
            <h3>${product.name}</h3>
            <p>${product.description ? product.description.substring(0, 60) + '...' : 'Great product for your little one'}</p>
            <div class="deal-price">
              <span class="price-current">₹${product.price.toLocaleString('en-IN')}</span>
              ${product.originalPrice ? `<span class="price-original">₹${product.originalPrice.toLocaleString('en-IN')}</span>` : ''}
            </div>
            <div class="deal-timer-small">
              <div class="timer-item-small">
                <div class="timer-value-small">${String(randomHours).padStart(2, '0')}</div>
                <div class="timer-label-small">Hrs</div>
              </div>
              <div class="timer-item-small">
                <div class="timer-value-small">${String(randomMins).padStart(2, '0')}</div>
                <div class="timer-label-small">Min</div>
              </div>
              <div class="timer-item-small">
                <div class="timer-value-small">00</div>
                <div class="timer-label-small">Sec</div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // ==================== GENERATE STARS ====================
    function generateStars(rating) {
      let stars = '';
      const fullStars = Math.floor(rating || 0);
      const hasHalf = (rating || 0) % 1 >= 0.5;
      
      for (let i = 0; i < fullStars; i++) {
        stars += '<i class="fas fa-star"></i>';
      }
      if (hasHalf) {
        stars += '<i class="fas fa-star-half-alt"></i>';
      }
      const emptyStars = 5 - fullStars - (hasHalf ? 1 : 0);
      for (let i = 0; i < emptyStars; i++) {
        stars += '<i class="far fa-star"></i>';
      }
      return stars;
    }

    // ==================== NAVIGATION ====================
    function goToProduct(productId) {
      window.location.href = `product-detail.html?id=${productId}`;
    }

    // ==================== ADD TO CART ====================
    async function quickAddToCart(productId) {
      const token = localStorage.getItem('kidocart_token');
      
      if (!token) {
        showToast('Please login to add items to cart', 'warning');
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 1500);
        return;
      }

      try {
        const response = await fetch('/api/cart', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + token
          },
          body: JSON.stringify({
            productId: productId,
            quantity: 1
          })
        });

        if (response.ok) {
          showToast('Added to cart!', 'success');
          updateHeaderCounts();
        } else {
          const error = await response.json();
          showToast(error.error || 'Failed to add to cart', 'error');
        }
      } catch (error) {
        console.error('Add to cart error:', error);
        showToast('Failed to add to cart', 'error');
      }
    }

    // ==================== ADD DEAL TO CART ====================
    async function addDealToCart(dealNum) {
      const deal = flashDealProducts[dealNum - 1];
      if (deal) {
        const productId = deal._id || deal.id;
        await quickAddToCart(productId);
      }
    }

    // ==================== ADD TO WISHLIST ====================
    async function quickAddToWishlist(productId) {
      const token = localStorage.getItem('kidocart_token');
      
      if (!token) {
        showToast('Please login to add items to wishlist', 'warning');
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 1500);
        return;
      }

      try {
        const response = await fetch('/api/wishlist', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + token
          },
          body: JSON.stringify({
            productId: productId
          })
        });

        if (response.ok) {
          showToast('Added to wishlist!', 'success');
          updateHeaderCounts();
        } else {
          const error = await response.json();
          showToast(error.error || 'Failed to add to wishlist', 'error');
        }
      } catch (error) {
        console.error('Add to wishlist error:', error);
        showToast('Failed to add to wishlist', 'error');
      }
    }

    // ==================== SHOW TOAST ====================
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast show ${type}`;
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // ==================== SEARCH ====================
    function performSearch() {
      const query = document.getElementById('search-input').value.trim();
      if (query) {
        window.location.href = `products.html?search=${encodeURIComponent(query)}`;
      }
    }

    document.getElementById('search-input').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        performSearch();
      }
    });

    document.getElementById('search-btn').addEventListener('click', performSearch);

    // ==================== NEWSLETTER ====================
    document.getElementById('newsletter-form').addEventListener('submit', function(e) {
      e.preventDefault();
      showToast('Thanks for subscribing!', 'success');
      this.reset();
    });

    // ==================== UPDATE HEADER COUNTS ====================
    async function updateHeaderCounts() {
      const token = localStorage.getItem('kidocart_token');
      
      // Cart count
      const cartCountEl = document.getElementById('cart-count');
      // Wishlist count
      const wishlistCountEl = document.getElementById('wishlist-count');
      
      if (token) {
        try {
          // Get cart count
          const cartResponse = await fetch('/api/cart', {
            headers: { 'Authorization': 'Bearer ' + token }
          });
          
          if (cartResponse.ok) {
            const cart = await cartResponse.json();
            const cartCount = cart.items 
              ? cart.items.reduce((sum, item) => sum + item.quantity, 0) 
              : 0;
            cartCountEl.textContent = cartCount;
            cartCountEl.style.display = cartCount > 0 ? 'flex' : 'none';
          }

          // Get wishlist count
          const wishlistResponse = await fetch('/api/wishlist', {
            headers: { 'Authorization': 'Bearer ' + token }
          });
          
          if (wishlistResponse.ok) {
            const wishlist = await wishlistResponse.json();
            const wishlistCount = wishlist.items ? wishlist.items.length : 0;
            wishlistCountEl.textContent = wishlistCount;
            wishlistCountEl.style.display = wishlistCount > 0 ? 'flex' : 'none';
          }
        } catch (error) {
          console.error('Error updating counts:', error);
        }
      } else {
        // Not logged in - hide badges
        cartCountEl.style.display = 'none';
        wishlistCountEl.style.display = 'none';
      }
    }

    // ==================== EMPTY STATE ====================
    function showEmptyState() {
      const emptyHTML = `
        <div style="text-align: center; padding: 3rem; color: var(--gray-500);">
          <i class="fas fa-box-open" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
          <p>No products available at the moment.</p>
          <p style="font-size: 0.9rem;">Please check back later!</p>
        </div>
      `;
      
      document.getElementById('trending-products').innerHTML = emptyHTML;
      document.getElementById('deals-products').innerHTML = emptyHTML;
      document.getElementById('bestseller-products').innerHTML = emptyHTML;
    }

    // ==================== ERROR STATE ====================
    function showErrorState() {
      const errorHTML = `
        <div style="text-align: center; padding: 3rem; color: var(--gray-500);">
          <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 1rem; color: #ef4444;"></i>
          <p>Unable to load products.</p>
          <button onclick="location.reload()" class="btn btn-primary" style="margin-top: 1rem;">
            <i class="fas fa-redo"></i> Try Again
          </button>
        </div>
      `;
      
      document.getElementById('trending-products').innerHTML = errorHTML;
      document.getElementById('deals-products').innerHTML = errorHTML;
      document.getElementById('bestseller-products').innerHTML = errorHTML;
    }

    // ==================== MOBILE MENU ====================
    document.getElementById('mobile-menu-btn').addEventListener('click', function() {
      // You can implement mobile menu toggle here
      // For now, redirect to products page
      window.location.href = 'products.html';
    });

    // ==================== INITIALIZE ====================
    document.addEventListener('DOMContentLoaded', function() {
      // Load products from MongoDB
      loadAllProducts();
      
      // Update cart/wishlist counts
      updateHeaderCounts();
      
      // Check if user is logged in and update UI accordingly
      const user = JSON.parse(localStorage.getItem('kidocart_currentUser'));
      if (user) {
        // User is logged in
        const accountLink = document.querySelector('.header-action[href="account.html"]');
        if (accountLink) {
          accountLink.innerHTML = `
            <i class="fas fa-user"></i>
            <span>${user.name ? user.name.split(' ')[0] : 'Account'}</span>
          `;
        }
      }
    });
  </script>
</body>
</html>
